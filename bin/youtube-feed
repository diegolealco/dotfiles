#!/usr/bin/env bash

cd "$HOME/Videos/feed"

exec 3>&1 4>&2 >>".log.txt" 2>&1

printf "\n\nDOWNLOAD STARTED\n$(date)\n\n"

youtube-dl \
  --no-progress \
  --playlist-items 1-10 \
  --max-downloads 15 \
  --ignore-errors \
  --no-continue \
  --no-overwrites \
  --no-post-overwrites \
  --restrict-filenames \
  --download-archive ".archive.txt" \
  --batch-file=".channel_list.txt" \
  --dateafter "$(date -d 'last Week' +%Y%m%d)" \
  --format "bestvideo[ext=mp4][height<=?720]+bestaudio" \
  --output "%(uploader)s/%(upload_date)s - %(title)s - (%(duration)ss).%(ext)s" \
